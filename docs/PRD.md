# Universal Tray Tool (UTT) - �?s�"�工�.�箱
## 产�"��o?�,�-?档 (Product Requirements Document)

**�?^�o�**: v1.0.0
**�-��oY**: 2026-02-19
**�S��?�**: �?�'中

---

## 1. 产�"��,述

### 1.1 产�"��?�<
Universal Tray Tool (UTT) �~��?款�Y��Z Avalonia UI �'O Prism �?�z��?�'�s"跨平台�O面工�.�箱�"�"��?,�f�??�"��'件�O-�z��z"设计�O�"��O�系�Y�?~�>~常驻�?��s�?签页管�?�O�"��^�可以根据�o?要灵活�?��.�SY�f�模�-�?,

### 1.2 核�f价�?�主张
- **模�-�O-�?��.**: �?s�?�'件�o��^��S��?��S�载�SY�f�模�-
- **系�Y级�>?�^�**: �"��O�系�Y�?~�>~常驻�O快�?Y访�-�常�"��SY�f�
- **�Y�?管�?平台**: �o��?个�"�"�中管�?�s种工�.��'O�SY�f�
- **跨平台�"��O�**: �Y��Z Avalonia UI�O�"��O� Windows�?�macOS�?�Linux

### 1.3 �>��?�"��^�
| �"��^�类�z< | 描述 | �o?�, |
|---------|------|------|
| �?�'�?. | �o?要�s种�?�'�.�S�工�.� | 可�?��.�s"�'件系�Y�?�快捷�'�令�?��O |
| �Sz�.�人�'~ | �-�常任�S�管�?�'O�.^�Z?工�.� | �.�Sz�<项�?��-��<�?�Z'�?�快�?Y启�S� |
| 系�Y管�?�'~ | �o��S��T��>'�Z��'O工�.��>?�^ | 系�Y�>'�Z��?��o�<�z�Z��?��-��-�Y��o< |
| �T��?s�"��^� | �?洁�~"�"��s"工�.��>?�^ | �>��,�s"�.O面�?�即�"�即走 |

---

## 2. �SY�f��o?�,

### 2.1 核�f�SY�f�

#### 2.1.1 系�Y�?~�>~�>?�^�
- **�SY�f�描述**: �"�"��o?小�O-�^�系�Y�?~�>~�O�"��O��?~�>~�>��?�,��?��"��?'
- **详�?�o?�,**:
  - 左�"��,��?��?~�>~�>��?: �^?换主�-口�~�示/�s��-�
  - 右�"��o�.: �~�示�SY�f�快捷�.�口�'O�??�?��??项
  - �"��O��?��s�?�?~�>~�>��?
  - �"��O��?~�>~�?s�Y��"泡

#### 2.1.2 �s�?签页管�?
- **�SY�f�描述**: 类似浏�^�T��s"�s�?签页�.O面�O�"��O�并�O�"��o�s个�SY�f�模�-
- **详�?�o?�,**:
  - �"��O��?"�?/�.��-�/�^?换�?签页
  - �?签页�"��O��<-�<��Z'序
  - 记住�S次�?"�?�s"�?签页�^可�??�?
  - �"��O��>��s常�"��?签页

#### 2.1.3 �'件系�Y
- **�SY�f�描述**: �S��?��S�载�'O管�?�SY�f��'件
- **详�?�o?�,**:
  - �'件�>��.: `plugins/`
  - �"��O��f��S�载/卸载�'件
  - �'件�s"离运�O�O避�.��'�>�影�"�
  - 提�>�'件 API �Z�口�>�?�'�?.使�"�
  - �'件�,�o��^�Z续�?^�o��?

#### 2.1.4 导�^��o�.
- **�SY�f�描述**: 左侧边栏导�^��O�"�?�'O管�?�??�o?�SY�f�模�-
- **详�?�o?�,**:
  - �^?�"�~�示: 核�f�SY�f��?�已�?�.�'件�?�占位�SY�f�
  - �"��O��>��?�'O�-?�-�?签
  - �'件�o��?�.�-��~�示占位�S��?�
  - �,��?�导�^�项�?"�?对�"�?签页

### 2.2 �?.置�SY�f�模�-

#### 2.2.1 �.�Sz�<项管�? (已�?.置)
- **�SY�f�描述**: 任�S�管�?工�.��O�"��O��~�.^级�?��^?类�?��^�止�-��oY
- **�SY�f��?��?�**:
  - �^>建/�-�'/�^��T�任�S�
  - 任�S��~�.^级: �~/中/�Z
  - 任�S��^?类�'O�?签
  - �^�止�-��oY�'O�?��oY提�?'
  - �O�^��S��?��^?换
  - �o索�'O�>�??�SY�f�

#### 2.2.2 设置中�f (已�?.置)
- **�SY�f�描述**: �"�"��.��?设置管�?
- **�SY�f��?��?�**:
  - �"�"��Y��o��.�置
  - �?~�>~�O为设置
  - �-��-级�^��.�置
  - �'件管�?

### 2.3 占位�SY�f�模�- (�?�'中)

#### 2.3.1 �,��?.管�?
- �,��?.信息�.�.��'O管�?
- 就�S记�.�Y踪
- �"约管�?

#### 2.3.2 �-��<�?�Z'
- �-��Z?�?�>�
- �<件提�?'
- �?�复任�S�设置

### 2.4 可�??�'件模�- (�Z续�?^�o�)

#### 2.4.1 WebView 容�T��'件
- **�SY�f�描述**: �O�.� Web �"�"��s"容�T�
- **�S?�o��-��^**: �Y��Z Microsoft Edge WebView2
- **�SY�f��?��?�**:
  - �S�载�-�f� Web �"�"�
  - JavaScript �O�'�?s信
  - �o��o� API 桥�Z�
  - �"��O��s个 Web �"�"��z�<

#### 2.4.2 �.��-�'件
- 计�-�T�
- �?�贴板�Z?史
- �o�?��<��-�T�
- �O维码�"Y�^��T�
- JSON 格式�O-工�.�
- �-?件�o索工�.�

---

## 3. �S?�o��z��z"

### 3.1 �S?�o��^
| �,级 | �S?�o��??�z< | �?^�o� |
|-----|---------|------|
| UI �?�z� | Avalonia UI | 11.3.12 |
| 主�~ | Semi.Avalonia | 11.3.7 |
| MVVM �?�z� | Prism.Avalonia | 9.0.537 |
| DI 容�T� | DryIoc | �?.置 |
| �.�置管�? | Microsoft.Extensions.Configuration | 9.0.0 |
| �-��-系�Y | Serilog | 4.2.0 |
| �>��?�?�z� | .NET | 10.0 |

### 3.2 项�>��"�z"
```
digital-intelligence-bridge/
�"o�"?�"? App.axaml              # �"�"��.�口�'O�.��?样式
�"o�"?�"? App.axaml.cs           # �"�"��"Y�'��'��oY�'O依�-注�.��.�置
�"o�"?�"? Configuration/         # �.�置�>��.�
�",   �""�"?�"? AppSettings.cs     # �"�"��.�置类
�"o�"?�"? Models/                # �.�据模�z<
�"o�"?�"? Services/              # �o��S��,
�",   �"o�"?�"? IApplicationService.cs
�",   �"o�"?�"? ITrayService.cs
�",   �""�"?�"? ...
�"o�"?�"? ViewModels/            # �?�>�模�z< (MVVM)
�"o�"?�"? Views/                 # �?�>��, (XAML)
�",   �"o�"?�"? MainWindow.axaml   # 主�-口
�",   �"o�"?�"? HomeView.axaml     # �-页
�",   �"o�"?�"? TodoView.axaml     # �.�Sz�<项
�",   �""�"?�"? SettingsView.axaml # 设置
�"o�"?�"? plugins/               # �'件�>��. (运�O�-��^>建)
�""�"?�"? appsettings.json       # �.�置�-?件
```

### 3.3 �z��z"设计

#### 3.3.1 MVVM 模式
- **Model**: �.�据�z�"�O�z�Z� `ObservableObject` �'O `[ObservableProperty]`
- **ViewModel**: �s�S��?��'�O继�?� `ViewModelBase`�O使�"� `DelegateCommand`
- **View**: XAML UI �s�?�O使�"��-�'�'�s (`x:DataType`)

#### 3.3.2 �'件�z��z"
```
�"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�
�",           Universal Tray Tool       �",
�",  �"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�  �"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�  �",
�",  �",  Core App   �",  �", Plugin Host �",  �",
�",  �""�"?�"?�"?�"?�"?�"?�"��"?�"?�"?�"?�"?�"?�"~  �""�"?�"?�"?�"?�"?�"?�"��"?�"?�"?�"?�"?�"?�"~  �",
�""�"?�"?�"?�"?�"?�"?�"?�"?�"?�"��"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"��"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"~
          �",                �",
          �-�                �-�
�"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�  �"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�
�", Built-in Modules�",  �",  Plugin Modules �",
�", - Todo          �",  �", - WebView       �",
�", - Settings      �",  �", - Calculator    �",
�",                 �",  �", - ...           �",
�""�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"~  �""�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"~
```

#### 3.3.3 �o��S��Z�口
```csharp
// �"�"��<序�o��S�
public interface IApplicationService
{
    Task InitializeAsync();
    Task OnStartedAsync();
    Task OnShutdownAsync();
    string GetVersion();
}

// �?~�>~�o��S�
public interface ITrayService
{
    void Initialize(Window window);
    void ShowWindow();
    void HideWindow();
    void ToggleWindow();
    void ExitApplication();
}

// �'件�Z�口 (�"�.T)
public interface IPluginModule
{
    string Id { get; }
    string Name { get; }
    string Version { get; }
    void Initialize(IServiceProvider serviceProvider);
    void Shutdown();
}
```

---

## 4. �"��^��.O面设计

### 4.1 主�-口�f�?
```
�"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�
�",  [�?�~栏]  Universal Tray Tool                [_][�-�][X]�",
�"o�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"��"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�
�",                �",                                    �",
�",  �"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�  �",  �"O�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�  �",
�",  �", �-页     �",  �",  �", [Tab1] [Tab2] [Tab3+]     [+]�",  �",
�",  �", �.�Sz�<项 �",  �",  �"o�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�  �",
�",  �", 设置     �",  �",  �",                              �",  �",
�",  �"o�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"�  �",  �",     �?签页�?.容�O��YY            �",  �",
�",  �", �'件�^?�" �",  �",  �",                              �",  �",
�",  �", - �'件A  �",  �",  �",                              �",  �",
�",  �", - �'件B  �",  �",  �",                              �",  �",
�",  �""�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"~  �",  �""�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"~  �",
�",                �",                                    �",
�""�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"��"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"?�"~
       250px                    �?��?,�"
```

### 4.2 设计�"�Of
- **�o�?�主�~**: 使�"� Semi.Avalonia 设计系�Y
- **侧边栏**: 深�?�主�~ (#2d2d2d)
- **�?.容�O�**: �.�?�主�~ (#fafafa)
- **�-�"**: Inter �-�"�-�
- **�o?�'**: 8px 卡�??�o?�'
- **�S��"�**: 200ms �?渡�S��"�

### 4.3 交�'设计
- **�,��o�.^�zo**: �O?�'��fO�T��?��~�O-
- **�,��?�反�^**: �O?�'�缩�"��?� 0.97
- **卡�??�.^�zo**: �,��o�-�轻微�S浮 + �~�影�z强
- **�?签页**: �"��O��.��-��O?�'��?��<-�<��Z'序

---

## 5. �.�置管�?

### 5.1 �.�置�-?件
**appsettings.json**:
```json
{
  "Application": {
    "Name": "�?s�"�工�.�箱",
    "Version": "1.0.0",
    "MinimizeToTray": true,
    "StartWithSystem": false
  },
  "Tray": {
    "IconPath": "Assets/avalonia-logo.ico",
    "ShowNotifications": true
  },
  "Plugin": {
    "PluginDirectory": "plugins",
    "AutoLoad": true,
    "AllowUnsigned": false
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning"
    },
    "LogPath": "logs"
  }
}
```

### 5.2 �.�置�~�,�
- **�~认�.�置**: �"�"��>��.�<�s" `appsettings.json`
- **�"��^��.�置**: `%LocalAppData%/UniversalTrayTool/appsettings.json`
- **�f��?�载**: �"��O��.�置�-?件�~�>��?��S��?�载

---

## 6. �-��-系�Y

### 6.1 �-��-�.�置
- **�?�z�**: Serilog
- **�"�?�**: �Z��^�台 + �-?件
- **�-?件�s�S�**: �O?天�s�S��O保�.T 7 天
- **路�"**: `logs/app-YYYYMMDD.log`

### 6.2 �-��-级�^�
- `Debug`: �?�'�f�.信息
- `Information`: 常�"�"��o�-��-
- `Warning`: 警�'S信息
- `Error`: �"T误信息

---

## 7. �?�'�"�Of

### 7.1 �'�名�"�Of
- **�-?件**: PascalCase (�, `MainWindow.axaml`)
- **类**: PascalCase (�, `MainWindowViewModel`)
- **�-��.**: PascalCase (�, `InitializeAsync`)
- **�-段**: �<�^'线 + camelCase (�, `_logger`)
- **�z�?�**: PascalCase (�, `CurrentView`)

### 7.2 代码�"�?
- �?个 View 对�"�?个 ViewModel
- �o��S��Z�口�s�?�o� `Services/` �>��.
- �?�>�模�z<继�?� `ViewModelBase`
- 使�"� `[ObservableProperty]` �?��S��"Y�^��z�?�

### 7.3 �'件�?�'�"�Of (�"�.T)
```csharp
public class MyPlugin : IPluginModule
{
    public string Id => "my.plugin";
    public string Name => "�^'�s"�'件";
    public string Version => "1.0.0";

    public void Initialize(IServiceProvider serviceProvider)
    {
        // �'件�^��<�O-
    }

    public void Shutdown()
    {
        // �'件�.�?
    }
}
```

---

## 8. �<�.�-�.�

### 8.1 �<�.类�z<
- **�.�.f�<�.**: �o��S��,�'O�?�>�模�z<
- **�>?�^��<�.**: �'件�S�载�'O�"Y�'��'��oY
- **UI �<�.**: �.O面交�'�'O�f�?

### 8.2 �<�.工�.�
- xUnit: �.�.f�<�.�?�z�
- Avalonia.Headless: UI �<�.�"��O�

---

## 9. �'�f计�^'

### 9.1 �?^�o��"�^'
| �?^�o� | �SY�f� | �-��-� |
|-----|------|------|
| v1.0.0 | �Y��?�?�z� + �.�Sz�<项 + 设置 | 2026 Q1 |
| v1.1.0 | WebView �'件 + �,��?.管�? | 2026 Q2 |
| v1.2.0 | �-��<�?�Z' + �'件�,�o� | 2026 Q3 |
| v2.0.0 | 跨平台�"��O� + �>��s�'件 | 2026 Q4 |

### 9.2 �'�f�>��?
- **Windows**: 主要�>��?平台
- **macOS**: �Z续�"��O�
- **Linux**: �Z续�"��O�

---

## 10. �T"�.

### 10.1 �,�?f�"源
- [Avalonia UI �-?档](https://docs.avaloniaui.net/)
- [Prism �?�z��-?档](https://prismlibrary.com/docs/)
- [Semi.Avalonia 主�~](https://github.com/irihitech/Semi.Avalonia)

### 10.2 �o�语表
| �o�语 | 解�?S |
|-----|------|
| MVVM | Model-View-ViewModel 设计模式 |
| DI | 依�-注�.� (Dependency Injection) |
| Prism | �"��Z�z"建松�?��^�?�可维�S��s" XAML �"�"��<序�?�z� |
| Avalonia | 跨平台 .NET UI �?�z� |
| WebView2 | Microsoft Edge �Y��Z Chromium �s" WebView �Z�件 |

### 10.3 �~�>�记�.
| �-��oY | �?^�o� | �~�>��?.容 |
|-----|------|---------|
| 2026-02-19 | v1.0.0 | �^��< PRD �^>建 |

---

**�-?档维�S�**: �?�'�>��~Y
**审核�S��?�**: �.审核
**�<次�"审**: 2026-03-01

